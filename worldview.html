<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Gordon ‚Äî Worldview</title>
  <link rel="icon" href="assets/gordon-logo.svg">
  <link rel="stylesheet" href="assets/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
</head>
<body>
  <nav class="nav">
    <a href="index.html" class="nav-brand"><img src="assets/gordon-logo.svg" alt="G">gordon.money</a>
    <div class="nav-links">
      <a href="index.html">Overview</a>
      <a href="strategies.html">Strategies</a>
      <a href="predictions.html">Predictions</a>
      <a href="signals.html">Signals</a>
      <a href="worldview.html" class="active">Worldview</a>
    </div>
  </nav>
  <div class="container" id="content"><div class="loading">Loading worldview</div></div>
  <footer class="footer">Powered by Gordon üí∞ | Data updates every 12h | Not financial advice</footer>
  <script src="assets/charts.js"></script>
  <script>
fetch('data/dashboard.json').then(r=>r.json()).then(data=>{
  const trades=data.trades;
  const c=document.getElementById('content');

  c.innerHTML=data.worldview.map(w=>{
    const driven=w.trades_driven.map(id=>trades.find(t=>t.id===id)).filter(Boolean);
    const convColor=w.conviction>=0.7?'var(--green)':w.conviction>=0.5?'var(--gold)':'var(--red)';
    return `<div class="card thesis-card" style="margin-bottom:20px">
      <div style="display:flex;justify-content:space-between;align-items:start;flex-wrap:wrap;gap:12px">
        <div>
          <h3 style="font-size:1.1rem;font-weight:700;color:var(--text);margin-bottom:4px">${w.title}</h3>
          <p style="font-size:0.85rem;color:var(--text-dim);max-width:700px">${w.description}</p>
        </div>
        <div style="text-align:right">
          <div style="font-size:0.75rem;text-transform:uppercase;color:var(--text-dim);letter-spacing:1px">Conviction</div>
          <div style="font-size:1.4rem;font-weight:700;color:${convColor}">${(w.conviction*100).toFixed(0)}%</div>
        </div>
      </div>
      <div class="progress-bar" style="margin:12px 0"><div class="progress-fill" style="width:${w.conviction*100}%;background:${convColor}"></div></div>
      <div style="margin:12px 0">${w.tickers.map(t=>`<span class="ticker-badge">${t}</span>`).join(' ')}</div>
      <div class="grid grid-2" style="margin-top:16px">
        <div>
          <div style="font-size:0.75rem;text-transform:uppercase;color:var(--green);letter-spacing:1px;margin-bottom:8px">‚úÖ Confirming Evidence</div>
          <ul class="evidence-list confirm">${w.evidence.confirming.map(e=>`<li>${e}</li>`).join('')}</ul>
        </div>
        <div>
          <div style="font-size:0.75rem;text-transform:uppercase;color:var(--red);letter-spacing:1px;margin-bottom:8px">‚ùå Contradicting Evidence</div>
          <ul class="evidence-list contradict">${w.evidence.contradicting.map(e=>`<li>${e}</li>`).join('')}</ul>
        </div>
      </div>
      ${driven.length?`<div style="margin-top:16px;padding-top:16px;border-top:1px solid var(--card-border)">
        <div style="font-size:0.75rem;text-transform:uppercase;color:var(--text-dim);letter-spacing:1px;margin-bottom:8px">Thesis-Driven Trades</div>
        <div style="display:flex;gap:12px;flex-wrap:wrap">${driven.map(t=>`<div style="font-size:0.85rem">
          ${t.symbol} ${dirBadge(t.direction)} <span class="${pnlClass(t.pnl_dollar)}">${fmt$(t.pnl_dollar)}</span>
        </div>`).join('')}</div>
        <div style="margin-top:8px;font-size:0.9rem">Total Return: <strong class="${pnlClass(w.total_return)}">${fmt$(w.total_return)}</strong></div>
      </div>`:''}
    </div>`;
  }).join('');
}).catch(()=>{document.getElementById('content').innerHTML='<div class="loading">Data loading...</div>';});
  </script>
</body>
</html>
